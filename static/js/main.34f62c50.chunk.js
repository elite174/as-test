(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{161:function(e,t,n){},162:function(e,t,n){},163:function(e,t,n){},164:function(e,t,n){},165:function(e,t,n){},166:function(e,t,n){},167:function(e,t,n){"use strict";n.r(t);var a,r,c=n(0),s=n.n(c),o=n(19),u=n.n(o),l=n(23),i=n.n(l),m=n(42),f=n(60),d=n(13),h=n(61),p=n(82);!function(e){e[e.cheap=0]="cheap",e[e.fast=1]="fast"}(a||(a={})),function(e){e.all="all",e.zero="zero",e.one="one",e.two="two",e.three="three"}(r||(r={}));var v,C={all:-1,zero:0,one:1,two:2,three:3},k={all:!0,one:!1,two:!1,three:!1,zero:!1};!function(e){e.addTickets="addTickets",e.setTransferCount="setTransferCount"}(v||(v={}));var b,E={tickets:[],sortBy:a.cheap,transferCounts:k,transferCountsValues:[C.all]},g=function(e,t){return Object(p.a)(e,function(n){switch(t.type){case v.addTickets:return n.tickets=[].concat(Object(h.a)(n.tickets),Object(h.a)(t.payload)),n;case v.setTransferCount:if(t.payload===r.all)return n.transferCounts=k,n.transferCountsValues=[C.all],n;n.transferCounts[t.payload]=!n.transferCounts[t.payload];var a=[];for(var c in n.transferCounts[t.payload]&&(n.transferCounts[r.all]=!1),n.transferCounts)n.transferCounts[c]&&a.push(C[c]);return 0===a.length&&(a.push(C.all),n.transferCounts[r.all]=!0),n.transferCountsValues=a,n;default:return e}})},x=s.a.createContext({store:E,dispatch:function(){}}),y=(n(97),Object(d.cn)("Checkbox")),w=s.a.memo(function(e){var t=e.checked,n=e.text,a=e.onCheckboxChange,r=e.name;return s.a.createElement("label",{className:y()},s.a.createElement("input",{name:r,className:y("Input"),type:"checkbox",checked:t,onChange:a}),s.a.createElement("span",{className:y("CheckMark")}),s.a.createElement("span",{className:y("Text")},n))}),j=(n(98),Object(d.cn)("TransferFilter")),N=s.a.memo(function(e){var t=e.checkboxHandler,n=Object(c.useContext)(x).store,a=Object(c.useCallback)(function(e){t(e.target.name)},[t]);return s.a.createElement("div",{className:j()},s.a.createElement("div",{className:j("Caption")},"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"),s.a.createElement(w,{text:"\u0412\u0441\u0435",checked:n.transferCounts.all,name:r.all,onCheckboxChange:a}),s.a.createElement(w,{text:"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a",checked:n.transferCounts.zero,name:r.zero,onCheckboxChange:a}),s.a.createElement(w,{text:"1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430",checked:n.transferCounts.one,name:r.one,onCheckboxChange:a}),s.a.createElement(w,{text:"2 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438",checked:n.transferCounts.two,name:r.two,onCheckboxChange:a}),s.a.createElement(w,{text:"3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438",checked:n.transferCounts.three,name:r.three,onCheckboxChange:a}))}),O=n(88),T=function(e){return String(e).padStart(2,"0")},M=(n(161),s.a.memo(function(e){var t=e.origin,n=e.destination,a=e.duration,r=e.stops,c=e.date,o=new Date(c),u="".concat(T(o.getHours()),":").concat(T(o.getMinutes()));o=new Date(o.getTime()+60*a*1e3);var l="".concat(T(o.getHours()),":").concat(T(o.getMinutes()));return s.a.createElement("div",{className:R("Segment")},s.a.createElement("table",{className:R("SegmentTable")},s.a.createElement("tbody",null,s.a.createElement("tr",{className:R("KeyRow")},s.a.createElement("td",null,t," - ",n),s.a.createElement("td",null,"\u0432 \u043f\u0443\u0442\u0438"),s.a.createElement("td",null,function(e){var t=e%100;if(0===e)return"\u043f\u0440\u044f\u043c\u043e\u0439";if(t>10&&t<20)return"".concat(e," \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a");switch(e%10){case 1:return"".concat(e," \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430");case 2:case 3:case 4:return"".concat(e," \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438");default:return"".concat(e," \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a")}}(r.length))),s.a.createElement("tr",{className:R("ValueRow")},s.a.createElement("td",null,u," - ",l),s.a.createElement("td",null,function(e){var t=e%60,n=Math.floor(e/60)%24,a=Math.floor(e/60/24),r="".concat(t,"\u043c");return(n||a)&&(r="".concat(n,"\u0447 ")+r),a&&(r="".concat(a,"\u0434 ")+r),r}(a)),s.a.createElement("td",null,r.join(", "))))))})),R=(n(162),Object(d.cn)("Ticket")),S=s.a.memo(function(e){var t,n=e.ticket;return s.a.createElement("div",{className:R()},s.a.createElement("div",{className:R("Row")},s.a.createElement("div",{className:R("Price")},function(e){var t=String(Math.floor(e));if(t.length<4)return t+" \u0420";var n=t.slice(0,t.length%3),a=t.slice(t.length%3).match(/.{1,3}/g);return(n?"".concat(n," "):"")+(a?a.join(" "):"")+" \u0420"}(n.price)),s.a.createElement("div",{className:R("CarrierLogo"),style:{backgroundImage:"url(".concat((t=n.carrier,"//pics.avs.io/99/36/".concat(t,".png")),")")}})),s.a.createElement("div",{className:R("Info")},n.segments.map(function(e,t){return s.a.createElement(M,Object.assign({key:"segment-".concat(t)},e))})))}),z=function(e,t){return e.price-t.price},B=function(e,t){return e.segments.reduce(function(e,t){return e+t.duration},0)-t.segments.reduce(function(e,t){return e+t.duration},0)},I=(n(163),Object(d.cn)("TicketList")),V=s.a.memo(function(e){var t=e.sortBy,n=Object(c.useContext)(x).store,r=Object(c.useMemo)(function(){return n.tickets.filter(function(e){if(n.transferCounts.all)return!0;var t=e.segments.map(function(e){return e.stops.length}),a=!0,r=!1,c=void 0;try{for(var s,o=t[Symbol.iterator]();!(a=(s=o.next()).done);a=!0){var u=s.value;if(!n.transferCountsValues.includes(u))return!1}}catch(l){r=!0,c=l}finally{try{a||null==o.return||o.return()}finally{if(r)throw c}}return!0}).sort(t===a.cheap?z:B).map(function(e){return s.a.createElement(S,{ticket:e})})},[n.tickets,t,n.transferCountsValues,n.transferCounts.all]),o=Object(c.useCallback)(function(e){var t=e.key,n=e.index,a=e.style;return s.a.createElement("div",{style:a,key:t},r[n])},[r]);return s.a.createElement("div",{className:I()},0===r.length?s.a.createElement("div",{className:I("EmptyResult")},"\u0431\u0438\u043b\u0435\u0442\u044b \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u044b"):s.a.createElement(O.a,{rowCount:r.length,rowHeight:204,width:503,height:1015,rowRenderer:o}))});!function(e){e.search="search",e.tickets="tickets"}(b||(b={}));var H=function(e,t){return fetch(function(e,t){var n="".concat("https://front-test.beta.aviasales.ru/").concat(e);return t?"".concat(n,"?searchId=").concat(t):n}(e,t))},F=(n(164),n(165),Object(d.cn)("App")),L=s.a.memo(function(){var e=Object(c.useReducer)(g,E),t=Object(f.a)(e,2),n=t[0],r=t[1],o=Object(c.useState)(a.cheap),u=Object(f.a)(o,2),l=u[0],d=u[1],h=Object(c.useCallback)(function(e){return r((t=e,{type:v.setTransferCount,payload:t}));var t},[]);return Object(c.useEffect)(function(){var e=function(){var e=Object(m.a)(i.a.mark(function e(){var t,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H(b.search);case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n.searchId);case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(m.a)(i.a.mark(function e(n){var a,c;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H(b.tickets,n);case 2:return a=e.sent,e.prev=3,e.next=6,a.json();case 6:c=e.sent,e.next=12;break;case 9:return e.prev=9,e.t0=e.catch(3),e.abrupt("return");case 12:r((s=c.tickets,{type:v.addTickets,payload:s})),c.stop||setTimeout(function(){return t(n)},0);case 14:case"end":return e.stop()}var s},e,null,[[3,9]])}));return function(t){return e.apply(this,arguments)}}();(function(){var n=Object(m.a)(i.a.mark(function n(){var a;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e();case 2:return a=n.sent,n.next=5,t(a);case 5:case"end":return n.stop()}},n)}));return function(){return n.apply(this,arguments)}})()()},[]),s.a.createElement(x.Provider,{value:{store:n,dispatch:r}},s.a.createElement("div",{className:F()},s.a.createElement("div",{className:F("Logo")}),s.a.createElement("div",{className:F("Content")},s.a.createElement("div",{className:F("LeftColumn")},s.a.createElement(N,{checkboxHandler:h})),s.a.createElement("div",{className:F("RightColumn")},s.a.createElement("div",{className:F("FilterControl")},s.a.createElement("div",{onClick:function(){return d(a.cheap)},className:F("FilterButton",{active:l===a.cheap})},"\u0421\u0430\u043c\u044b\u0439 \u0434\u0435\u0448\u0451\u0432\u044b\u0439"),s.a.createElement("div",{onClick:function(){return d(a.fast)},className:F("FilterButton",{active:l===a.fast})},"\u0421\u0430\u043c\u044b\u0439 \u0431\u044b\u0441\u0442\u0440\u044b\u0439")),s.a.createElement(V,{sortBy:l})))))});n(166);u.a.render(s.a.createElement(L,null),document.getElementById("root"))},89:function(e,t,n){e.exports=n(167)},97:function(e,t,n){},98:function(e,t,n){}},[[89,1,2]]]);
//# sourceMappingURL=main.34f62c50.chunk.js.map